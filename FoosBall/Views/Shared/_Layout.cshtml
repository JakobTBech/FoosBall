@using StackExchange.Profiling
<!DOCTYPE html>
<html ng-app="FoosBall">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="robots" content="noindex">
    <link rel="shortcut icon" href="https://s3-eu-west-1.amazonaws.com/images.trustpilot.com/static/foosball/favicon.ico" type="image/x-icon" />

    <title>
        @if (ViewBag.Settings.Environment.ToString() != "Production")
        {
            @ViewBag.Settings.Environment.ToString()
        }
        @ViewBag.Title
    </title>

    <link href="@Url.Content("~/css/minified/foosball.min.css")" rel="stylesheet" type="text/css" />
    
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script>
        if (typeof jQuery == 'undefined') {
            document.write(unescape('%3Cscript src="/js/lib/jquery.min.js")" type="text/javascript"%3E%3C/script%3E'));
        }
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.0rc1/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.0rc1/angular-resource.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.0rc1/angular-route.min.js"></script>
    <script src="/js/lib/md5.js"></script>
    <script src="/js/lib/highcharts.js"></script>
    <script>
        if (typeof angular === 'undefined') {
            document.write(unescape('%3Cscript src="/js/lib/angular.min.js" type="text/javascript"%3E%3C/script%3E'));
            document.write(unescape('%3Cscript src="/js/lib/angular-resource.min.js" type="text/javascript"%3E%3C/script%3E'));
            document.write(unescape('%3Cscript src="/js/lib/angular-route.min.js" type="text/javascript"%3E%3C/script%3E'));
        }
    </script>

    <script src="/js/lib/jquery.signalR-1.0.0.min.js"></script>
    <script src="/signalr/hubs"></script>
    <script src="/js/foosBall.js"></script>

    <script src="/js/angular/base.controller.js"></script> 
    <script src="/js/angular/account.controller.js"></script> 
    <script src="/js/angular/stats.controller.js"></script> 
    <script src="/js/angular/playerstats.controller.js"></script>
    <script src="/js/angular/home.controller.js"></script> 
    <script src="/js/angular/matches.controller.js"></script>
    <script src="/js/angular/players.controller.js"></script>
    <script src="/js/angular/app.js"></script>
    @*<script src="/js/minified/app.min.js"></script>*@

</head>
<body ng-controller="BaseController">
    @{
        var currentUser = (Player)HttpContext.Current.Session["User"];
        if (currentUser != null && !string.IsNullOrWhiteSpace(currentUser.Id))
        {
            <input id="current-user-id" type="hidden" value="@currentUser.Id"/>
        }
    }
    <div id="request-notification">
        Try the new Foosball Fighting desktop notifications - You'll love it!<br />
        <input class="button" id="notify-me" value="Ok, off we go!" />
    </div>

    <img src="https://s3-eu-west-1.amazonaws.com/images.trustpilot.com/static/foosball/background.jpg" id="bg" class="bgwidth" alt="background image"/>
    
    <header>
        <a ng-href="/#/">
        <div id="app-title">
            <div class="logo-picture">
                <img src="https://s3-eu-west-1.amazonaws.com/images.trustpilot.com/static/foosball/icon_football.png" alt="logo"/>
            </div>
            <div class="logo-text">
                @if (ViewBag.Settings.Environment.ToString() != "Production")
                {
                    @ViewBag.Settings.Environment.ToString()  
                }
                @ViewBag.Settings.Name
            </div>
        </div>
        </a>
        <nav>
            <div class="menu-arrow"></div>
            <ul id="main-menu">
                <li class="Home"><a ng-href="/#/">Home</a></li>
                <li class="Scoreboard"><a ng-href="/#/players">Scoreboard</a></li>
                <li class="Matches"><a ng-href="/#/matches">Matches</a></li>
                <li class="Stats"><a ng-href="/#/stats">Stats</a></li>
                <li class="Features"><a ng-href="/#/features">Features</a></li>
                @if (Session["IsLoggedIn"].ToString().ToLower() == "true")
                {
                    if (Session["Admin"].ToString().ToLower() == "true")
                    {
                        <li class="Admin">@Html.ActionLink("Admin", "Index", "Admin")</li>
                    }
                }
            </ul> 
        </nav>

        <div ng-include="'/partials/_logon-menu.html'" class="login-display"></div>
    </header>

    <div id="page" class="clearfix">
        <section id="main">
            <div ng-view></div>
            @RenderBody()
        </section>
    </div>

    <!-- Deferred Javascript -->
    <script src="/js/Shared.js"></script>
    @RenderSection("Javascript", false)
    @MiniProfiler.RenderIncludes()       
</body>
</html>
